"use strict";(self["webpackChunkuniversity_crm"]=self["webpackChunkuniversity_crm"]||[]).push([[9359],{9359:function(e,t,n){n.r(t),n.d(t,{default:function(){return In}});var i=n(3396),s=n(7139),r=n(9242);const o=e=>((0,i.dD)("data-v-c9ea18ea"),e=e(),(0,i.Cn)(),e),a={class:"pdf-container",style:{overflow:"auto",width:"100%"}},l={class:"ps-5 border-bottom w-100 pt-2 d-flex justify-content-between align-items-center",style:{overflow:"auto"}},d={class:"d-flex align-items-center"},c={key:0},p=["disabled"],u=["disabled"],v={key:0,class:"align-items-center justify-content-center d-flex flex-column text-center w-100",style:{height:"60vh"}},g=["innerHTML"],h=o((()=>(0,i._)("h1",{class:"mt-3"},"No file found",-1))),w=o((()=>(0,i._)("p",{class:"m-0"},"It seems we canâ€™t find any file.",-1))),m={key:1,class:"w-100",style:{height:"70vh"}},f={key:0},y={class:"d-flex pt-3 flex-column align-items-center bg-white w-75",style:{"margin-left":"11%"}},b=["onDblclick"],x=["id"],_={class:"text-center"},C={style:{"font-size":"0.85em"},class:"text-center"},k={class:"mb-3"},L=["onClick","disabled"],D=["onClick","disabled"],S={key:1};function P(e,t,n,o,P,$){const A=(0,i.up)("LetterCard"),I=(0,i.up)("PdfPreview");return(0,i.wg)(),(0,i.iD)("div",a,[(0,i._)("div",l,[(0,i._)("div",d,[(0,i._)("div",{onClick:t[0]||(t[0]=e=>P.currentTab=1),style:(0,s.j5)([{cursor:"pointer","border-bottom":"4px solid transparent",color:"rgb(29, 41, 57)","font-size":"13px"},2===P.currentTab&&"border-bottom:  3px solid #bbb; font-weight:600"]),class:"p-3"}," All Documents ",4)]),(0,i._)("div",null,[null!=P.selectedLetterIndex?((0,i.wg)(),(0,i.iD)("span",c,[(0,i._)("button",{onClick:t[1]||(t[1]=e=>$.updateStatus(P.letters[P.selectedLetterIndex],"accepted")),class:(0,s.C_)([{"d-inline":null!=P.selectedLetterIndex,"d-none":null==P.selectedLetterIndex},"btn mx-2 btn-secondary btn-sm text-dark px-2"]),disabled:"accepted"===P.letters[P.selectedLetterIndex].receiver_status},"Submit Document",10,p)])):(0,i.kq)("",!0),P.previewLetter?.url?((0,i.wg)(),(0,i.iD)("button",{key:1,class:(0,s.C_)([{"d-inline":null!=P.selectedLetterIndex,"d-none":null==P.selectedLetterIndex},"btn mx-2 btn-danger btn-sm"]),onClick:t[2]||(t[2]=e=>$.reset()),disabled:"accepted"===P.letters[P.selectedLetterIndex].receiver_status},"Reset",10,u)):(0,i.kq)("",!0),(0,i._)("button",{class:(0,s.C_)([{"d-inline":null!=P.selectedLetterIndex,"d-none":null==P.selectedLetterIndex},"btn btn-warning btn-sm"]),onClick:t[3]||(t[3]=e=>{P.previewLetter=null,P.keyData+=1,P.letters[P.selectedLetterIndex].show=!1})},"Back to Documents",2)])]),(0,i._)("div",{class:(0,s.C_)([{"d-flex":1===P.currentTab,"d-none":1!==P.currentTab},"w-100"]),style:{"overflow-y":"auto",height:"100%"}},[P.letters.length<1?((0,i.wg)(),(0,i.iD)("div",v,[(0,i._)("span",{innerHTML:e.$globals.icons.noDocs},null,8,g),h,w])):((0,i.wg)(),(0,i.iD)("div",m,[null==P.previewLetter?((0,i.wg)(),(0,i.iD)("div",f,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(P.letters,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{key:t,class:"d-flex flex-column align-items-center my-2"},[((0,i.wg)(),(0,i.j4)(A,{key:P.keyData,onView:n=>$.OpenLetterCard(n,t,e,"prevCanvasFinal_"+t),letter:e},null,8,["onView","letter"])),(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",{key:P.previewLetter?.url,class:"w-100 bg-white"},[(0,i._)("div",y,[(0,i._)("div",{id:"previewScreen",onDblclick:t=>$.preview(e),style:"padding: 10px;border: 1px dashed #aaa;  margin: 20px 10px;",class:"position-relative col-md-3 d-flex flex-column align-items-center"},[(0,i._)("canvas",{ref_for:!0,ref:"prevCanvasFinal_"+t,id:"prevCanvasFinal_"+t,style:{width:"160px",border:"1px solid #aaa"},class:"mx-auto",height:"200"},null,8,x),(0,i._)("p",_,[(0,i._)("span",C,(0,s.zw)(e.pages)+" Pages",1)])],40,b),(0,i._)("div",k,[(0,i._)("button",{onClick:t=>$.updateStatus(e,"accepted"),disabled:"accepted"===e.receiver_status,class:"btn mx-2 btn-secondary btn-sm text-dark px-2"},"Submit Document",8,L),(0,i._)("button",{onClick:t=>$.updateStatus(e,"rejected"),disabled:"accepted"===e.receiver_status,class:"btn mx-2 btn-secondary btn-sm text-dark px-2"},"Reject Document",8,D)])])])),[[r.F8,e?.show]])])))),128))])):((0,i.wg)(),(0,i.iD)("div",S,[((0,i.wg)(),(0,i.j4)(I,{ref:"childRef",onUndoAttach:t[4]||(t[4]=e=>$.undoAttach(e)),key:P.previewLetter?.url,onAttachSignature:t[5]||(t[5]=e=>$.signagureData(e)),onLoaded:t[6]||(t[6]=e=>$.previewLoaded(e)),letter:P.previewLetter},null,8,["letter"]))]))]))],2)])}n(7658),n(6229),n(7330),n(2062);var $=n(6133),A=n(8003),I=n(3912),E=n.n(I);let T={};function H(e={}){T={animate:!0,allowClose:!0,overlayOpacity:.7,smoothScroll:!1,disableActiveInteraction:!1,showProgress:!1,stagePadding:10,stageRadius:5,popoverOffset:10,showButtons:["next","previous","close"],disableButtons:[],overlayColor:"#000",...e}}function M(e){return e?T[e]:T}function B(e,t,n,i){return(e/=i/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t}function O(e){const t='a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type="text"]:not([disabled]), input[type="radio"]:not([disabled]), input[type="checkbox"]:not([disabled]), select:not([disabled])';return e.flatMap((e=>{const n=e.matches(t),i=Array.from(e.querySelectorAll(t));return[...n?[e]:[],...i]})).filter((e=>"none"!==getComputedStyle(e).pointerEvents&&z(e)))}function R(e){if(!e||W(e))return;const t=M("smoothScroll");e.scrollIntoView({behavior:!t||j(e)?"auto":"smooth",inline:"center",block:"center"})}function j(e){if(!e||!e.parentElement)return;const t=e.parentElement;return t.scrollHeight>t.clientHeight}function W(e){const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}function z(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}let N={};function F(e,t){N[e]=t}function U(e){return e?N[e]:N}function Y(){N={}}let K={};function q(e,t){K[e]=t}function V(e){var t;null==(t=K[e])||t.call(K)}function G(){K={}}function Z(e,t,n,i){let s=U("__activeStagePosition");const r=s||n.getBoundingClientRect(),o=i.getBoundingClientRect(),a=B(e,r.x,o.x-r.x,t),l=B(e,r.y,o.y-r.y,t),d=B(e,r.width,o.width-r.width,t),c=B(e,r.height,o.height-r.height,t);s={x:a,y:l,width:d,height:c},ee(s),F("__activeStagePosition",s)}function X(e){if(!e)return;const t=e.getBoundingClientRect(),n={x:t.x,y:t.y,width:t.width,height:t.height};F("__activeStagePosition",n),ee(n)}function J(){const e=U("__activeStagePosition"),t=U("__overlaySvg");if(!e)return;if(!t)return void console.warn("No stage svg found.");const n=window.innerWidth,i=window.innerHeight;t.setAttribute("viewBox",`0 0 ${n} ${i}`)}function Q(e){const t=te(e);document.body.appendChild(t),ue(t,(e=>{"path"===e.target.tagName&&V("overlayClick")})),F("__overlaySvg",t)}function ee(e){const t=U("__overlaySvg");if(!t)return void Q(e);const n=t.firstElementChild;if("path"!==(null==n?void 0:n.tagName))throw new Error("no path element found in stage svg");n.setAttribute("d",ne(e))}function te(e){const t=window.innerWidth,n=window.innerHeight,i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.classList.add("driver-overlay","driver-overlay-animated"),i.setAttribute("viewBox",`0 0 ${t} ${n}`),i.setAttribute("xmlSpace","preserve"),i.setAttribute("xmlnsXlink","http://www.w3.org/1999/xlink"),i.setAttribute("version","1.1"),i.setAttribute("preserveAspectRatio","xMinYMin slice"),i.style.fillRule="evenodd",i.style.clipRule="evenodd",i.style.strokeLinejoin="round",i.style.strokeMiterlimit="2",i.style.zIndex="10000",i.style.position="fixed",i.style.top="0",i.style.left="0",i.style.width="100%",i.style.height="100%";const s=document.createElementNS("http://www.w3.org/2000/svg","path");return s.setAttribute("d",ne(e)),s.style.fill=M("overlayColor")||"rgb(0,0,0)",s.style.opacity=`${M("overlayOpacity")}`,s.style.pointerEvents="auto",s.style.cursor="auto",i.appendChild(s),i}function ne(e){const t=window.innerWidth,n=window.innerHeight,i=M("stagePadding")||0,s=M("stageRadius")||0,r=e.width+2*i,o=e.height+2*i,a=Math.min(s,r/2,o/2),l=Math.floor(Math.max(a,0)),d=e.x-i+l,c=e.y-i,p=r-2*l,u=o-2*l;return`M${t},0L0,0L0,${n}L${t},${n}L${t},0Z\n    M${d},${c} h${p} a${l},${l} 0 0 1 ${l},${l} v${u} a${l},${l} 0 0 1 -${l},${l} h-${p} a${l},${l} 0 0 1 -${l},-${l} v-${u} a${l},${l} 0 0 1 ${l},-${l} z`}function ie(){const e=U("__overlaySvg");e&&e.remove()}function se(){const e=document.getElementById("driver-dummy-element");if(e)return e;let t=document.createElement("div");return t.id="driver-dummy-element",t.style.width="0",t.style.height="0",t.style.pointerEvents="none",t.style.opacity="0",t.style.position="fixed",t.style.top="50%",t.style.left="50%",document.body.appendChild(t),t}function re(e){const{element:t}=e;let n="string"==typeof t?document.querySelector(t):t;n||(n=se()),ae(n,e)}function oe(){const e=U("__activeElement"),t=U("__activeStep");e&&(X(e),J(),be(e,t))}function ae(e,t){const n=Date.now(),i=U("__activeStep"),s=U("__activeElement")||e,r=!s||s===e,o="driver-dummy-element"===e.id,a="driver-dummy-element"===s.id,l=M("animate"),d=t.onHighlightStarted||M("onHighlightStarted"),c=(null==t?void 0:t.onHighlighted)||M("onHighlighted"),p=(null==i?void 0:i.onDeselected)||M("onDeselected"),u=M(),v=U();!r&&p&&p(a?void 0:s,i,{config:u,state:v}),d&&d(o?void 0:e,t,{config:u,state:v});const g=!r&&l;let h=!1;he(),F("previousStep",i),F("previousElement",s),F("activeStep",t),F("activeElement",e);const w=()=>{if(U("__transitionCallback")!==w)return;const r=Date.now()-n,a=400-r<=200;t.popover&&a&&!h&&g&&(we(e,t),h=!0),M("animate")&&r<400?Z(r,400,s,e):(X(e),c&&c(o?void 0:e,t,{config:M(),state:U()}),F("__transitionCallback",void 0),F("__previousStep",i),F("__previousElement",s),F("__activeStep",t),F("__activeElement",e)),window.requestAnimationFrame(w)};F("__transitionCallback",w),window.requestAnimationFrame(w),R(e),!g&&t.popover&&we(e,t),s.classList.remove("driver-active-element","driver-no-interaction"),s.removeAttribute("aria-haspopup"),s.removeAttribute("aria-expanded"),s.removeAttribute("aria-controls"),M("disableActiveInteraction")&&e.classList.add("driver-no-interaction"),e.classList.add("driver-active-element"),e.setAttribute("aria-haspopup","dialog"),e.setAttribute("aria-expanded","true"),e.setAttribute("aria-controls","driver-popover-content")}function le(){var e;null==(e=document.getElementById("driver-dummy-element"))||e.remove(),document.querySelectorAll(".driver-active-element").forEach((e=>{e.classList.remove("driver-active-element","driver-no-interaction"),e.removeAttribute("aria-haspopup"),e.removeAttribute("aria-expanded"),e.removeAttribute("aria-controls")}))}function de(){const e=U("__resizeTimeout");e&&window.cancelAnimationFrame(e),F("__resizeTimeout",window.requestAnimationFrame(oe))}function ce(e){var t;if(!U("isInitialized")||"Tab"!==e.key&&9!==e.keyCode)return;const n=U("__activeElement"),i=null==(t=U("popover"))?void 0:t.wrapper,s=O([...i?[i]:[],...n?[n]:[]]),r=s[0],o=s[s.length-1];if(e.preventDefault(),e.shiftKey){const e=s[s.indexOf(document.activeElement)-1]||o;null==e||e.focus()}else{const e=s[s.indexOf(document.activeElement)+1]||r;null==e||e.focus()}}function pe(e){var t;(null==(t=M("allowKeyboardControl"))||t)&&("Escape"===e.key?V("escapePress"):"ArrowRight"===e.key?V("arrowRightPress"):"ArrowLeft"===e.key&&V("arrowLeftPress"))}function ue(e,t,n){const i=(t,i)=>{const s=t.target;e.contains(s)&&((!n||n(s))&&(t.preventDefault(),t.stopPropagation(),t.stopImmediatePropagation()),null==i||i(t))};document.addEventListener("pointerdown",i,!0),document.addEventListener("mousedown",i,!0),document.addEventListener("pointerup",i,!0),document.addEventListener("mouseup",i,!0),document.addEventListener("click",(e=>{i(e,t)}),!0)}function ve(){window.addEventListener("keyup",pe,!1),window.addEventListener("keydown",ce,!1),window.addEventListener("resize",de),window.addEventListener("scroll",de)}function ge(){window.removeEventListener("keyup",pe),window.removeEventListener("resize",de),window.removeEventListener("scroll",de)}function he(){const e=U("popover");e&&(e.wrapper.style.display="none")}function we(e,t){var n,i;let s=U("popover");s&&document.body.removeChild(s.wrapper),s=_e(),document.body.appendChild(s.wrapper);const{title:r,description:o,showButtons:a,disableButtons:l,showProgress:d,nextBtnText:c=M("nextBtnText")||"Next &rarr;",prevBtnText:p=M("prevBtnText")||"&larr; Previous",progressText:u=M("progressText")||"{current} of {total}"}=t.popover||{};s.nextButton.innerHTML=c,s.previousButton.innerHTML=p,s.progress.innerHTML=u,r?(s.title.innerHTML=r,s.title.style.display="block"):s.title.style.display="none",o?(s.description.innerHTML=o,s.description.style.display="block"):s.description.style.display="none";const v=a||M("showButtons"),g=d||M("showProgress")||!1,h=(null==v?void 0:v.includes("next"))||(null==v?void 0:v.includes("previous"))||g;s.closeButton.style.display=v.includes("close")?"block":"none",h?(s.footer.style.display="flex",s.progress.style.display=g?"block":"none",s.nextButton.style.display=v.includes("next")?"block":"none",s.previousButton.style.display=v.includes("previous")?"block":"none"):s.footer.style.display="none";const w=l||M("disableButtons")||[];null!=w&&w.includes("next")&&(s.nextButton.disabled=!0,s.nextButton.classList.add("driver-popover-btn-disabled")),null!=w&&w.includes("previous")&&(s.previousButton.disabled=!0,s.previousButton.classList.add("driver-popover-btn-disabled")),null!=w&&w.includes("close")&&(s.closeButton.disabled=!0,s.closeButton.classList.add("driver-popover-btn-disabled"));const m=s.wrapper;m.style.display="block",m.style.left="",m.style.top="",m.style.bottom="",m.style.right="",m.id="driver-popover-content",m.setAttribute("role","dialog"),m.setAttribute("aria-labelledby","driver-popover-title"),m.setAttribute("aria-describedby","driver-popover-description");const f=s.arrow;f.className="driver-popover-arrow";const y=(null==(n=t.popover)?void 0:n.popoverClass)||M("popoverClass")||"";m.className=`driver-popover ${y}`.trim(),ue(s.wrapper,(n=>{var i,s,r;const o=n.target,a=(null==(i=t.popover)?void 0:i.onNextClick)||M("onNextClick"),l=(null==(s=t.popover)?void 0:s.onPrevClick)||M("onPrevClick"),d=(null==(r=t.popover)?void 0:r.onCloseClick)||M("onCloseClick");return o.classList.contains("driver-popover-next-btn")?a?a(e,t,{config:M(),state:U()}):V("nextClick"):o.classList.contains("driver-popover-prev-btn")?l?l(e,t,{config:M(),state:U()}):V("prevClick"):o.classList.contains("driver-popover-close-btn")?d?d(e,t,{config:M(),state:U()}):V("closeClick"):void 0}),(e=>!(null!=s&&s.description.contains(e))&&!(null!=s&&s.title.contains(e))&&"string"==typeof e.className&&e.className.includes("driver-popover"))),F("popover",s);const b=(null==(i=t.popover)?void 0:i.onPopoverRender)||M("onPopoverRender");b&&b(s,{config:M(),state:U()}),be(e,t),R(m);const x=e.classList.contains("driver-dummy-element"),_=O([m,...x?[]:[e]]);_.length>0&&_[0].focus()}function me(){const e=U("popover");if(null==e||!e.wrapper)return;const t=e.wrapper.getBoundingClientRect(),n=M("stagePadding")||0,i=M("popoverOffset")||0;return{width:t.width+n+i,height:t.height+n+i,realWidth:t.width,realHeight:t.height}}function fe(e,t){const{elementDimensions:n,popoverDimensions:i,popoverPadding:s,popoverArrowDimensions:r}=t;return"start"===e?Math.max(Math.min(n.top-s,window.innerHeight-i.realHeight-r.width),r.width):"end"===e?Math.max(Math.min(n.top-(null==i?void 0:i.realHeight)+n.height+s,window.innerHeight-(null==i?void 0:i.realHeight)-r.width),r.width):"center"===e?Math.max(Math.min(n.top+n.height/2-(null==i?void 0:i.realHeight)/2,window.innerHeight-(null==i?void 0:i.realHeight)-r.width),r.width):0}function ye(e,t){const{elementDimensions:n,popoverDimensions:i,popoverPadding:s,popoverArrowDimensions:r}=t;return"start"===e?Math.max(Math.min(n.left-s,window.innerWidth-i.realWidth-r.width),r.width):"end"===e?Math.max(Math.min(n.left-(null==i?void 0:i.realWidth)+n.width+s,window.innerWidth-(null==i?void 0:i.realWidth)-r.width),r.width):"center"===e?Math.max(Math.min(n.left+n.width/2-(null==i?void 0:i.realWidth)/2,window.innerWidth-(null==i?void 0:i.realWidth)-r.width),r.width):0}function be(e,t){const n=U("popover");if(!n)return;const{align:i="start",side:s="left"}=(null==t?void 0:t.popover)||{},r=i,o="driver-dummy-element"===e.id?"over":s,a=M("stagePadding")||0,l=me(),d=n.arrow.getBoundingClientRect(),c=e.getBoundingClientRect(),p=c.top-l.height;let u=p>=0;const v=window.innerHeight-(c.bottom+l.height);let g=v>=0;const h=c.left-l.width;let w=h>=0;const m=window.innerWidth-(c.right+l.width);let f=m>=0;const y=!u&&!g&&!w&&!f;let b=o;if("top"===o&&u?f=w=g=!1:"bottom"===o&&g?f=w=u=!1:"left"===o&&w?f=u=g=!1:"right"===o&&f&&(w=u=g=!1),"over"===o){const e=window.innerWidth/2-l.realWidth/2,t=window.innerHeight/2-l.realHeight/2;n.wrapper.style.left=`${e}px`,n.wrapper.style.right="auto",n.wrapper.style.top=`${t}px`,n.wrapper.style.bottom="auto"}else if(y){const e=window.innerWidth/2-(null==l?void 0:l.realWidth)/2,t=10;n.wrapper.style.left=`${e}px`,n.wrapper.style.right="auto",n.wrapper.style.bottom=`${t}px`,n.wrapper.style.top="auto"}else if(w){const e=Math.min(h,window.innerWidth-(null==l?void 0:l.realWidth)-d.width),t=fe(r,{elementDimensions:c,popoverDimensions:l,popoverPadding:a,popoverArrowDimensions:d});n.wrapper.style.left=`${e}px`,n.wrapper.style.top=`${t}px`,n.wrapper.style.bottom="auto",n.wrapper.style.right="auto",b="left"}else if(f){const e=Math.min(m,window.innerWidth-(null==l?void 0:l.realWidth)-d.width),t=fe(r,{elementDimensions:c,popoverDimensions:l,popoverPadding:a,popoverArrowDimensions:d});n.wrapper.style.right=`${e}px`,n.wrapper.style.top=`${t}px`,n.wrapper.style.bottom="auto",n.wrapper.style.left="auto",b="right"}else if(u){const e=Math.min(p,window.innerHeight-l.realHeight-d.width);let t=ye(r,{elementDimensions:c,popoverDimensions:l,popoverPadding:a,popoverArrowDimensions:d});n.wrapper.style.top=`${e}px`,n.wrapper.style.left=`${t}px`,n.wrapper.style.bottom="auto",n.wrapper.style.right="auto",b="top"}else if(g){const e=Math.min(v,window.innerHeight-(null==l?void 0:l.realHeight)-d.width);let t=ye(r,{elementDimensions:c,popoverDimensions:l,popoverPadding:a,popoverArrowDimensions:d});n.wrapper.style.left=`${t}px`,n.wrapper.style.bottom=`${e}px`,n.wrapper.style.top="auto",n.wrapper.style.right="auto",b="bottom"}y?n.arrow.classList.add("driver-popover-arrow-none"):xe(r,b,e)}function xe(e,t,n){const i=U("popover");if(!i)return;const s=n.getBoundingClientRect(),r=me(),o=i.arrow,a=r.width,l=window.innerWidth,d=s.width,c=s.left,p=r.height,u=window.innerHeight,v=s.top,g=s.height;o.className="driver-popover-arrow";let h=t,w=e;"top"===t?(c+d<=0?(h="right",w="end"):c+d-a<=0&&(h="top",w="start"),c>=l?(h="left",w="end"):c+a>=l&&(h="top",w="end")):"bottom"===t?(c+d<=0?(h="right",w="start"):c+d-a<=0&&(h="bottom",w="start"),c>=l?(h="left",w="start"):c+a>=l&&(h="bottom",w="end")):"left"===t?(v+g<=0?(h="bottom",w="end"):v+g-p<=0&&(h="left",w="start"),v>=u?(h="top",w="end"):v+p>=u&&(h="left",w="end")):"right"===t&&(v+g<=0?(h="bottom",w="start"):v+g-p<=0&&(h="right",w="start"),v>=u?(h="top",w="start"):v+p>=u&&(h="right",w="end")),h?(o.classList.add(`driver-popover-arrow-side-${h}`),o.classList.add(`driver-popover-arrow-align-${w}`)):o.classList.add("driver-popover-arrow-none")}function _e(){const e=document.createElement("div");e.classList.add("driver-popover");const t=document.createElement("div");t.classList.add("driver-popover-arrow");const n=document.createElement("header");n.id="driver-popover-title",n.classList.add("driver-popover-title"),n.style.display="none",n.innerText="Popover Title";const i=document.createElement("div");i.id="driver-popover-description",i.classList.add("driver-popover-description"),i.style.display="none",i.innerText="Popover description is here";const s=document.createElement("button");s.type="button",s.classList.add("driver-popover-close-btn"),s.setAttribute("aria-label","Close"),s.innerHTML="&times;";const r=document.createElement("footer");r.classList.add("driver-popover-footer");const o=document.createElement("span");o.classList.add("driver-popover-progress-text"),o.innerText="";const a=document.createElement("span");a.classList.add("driver-popover-navigation-btns");const l=document.createElement("button");l.type="button",l.classList.add("driver-popover-prev-btn"),l.innerHTML="&larr; Previous";const d=document.createElement("button");return d.type="button",d.classList.add("driver-popover-next-btn"),d.innerHTML="Next &rarr;",a.appendChild(l),a.appendChild(d),r.appendChild(o),r.appendChild(a),e.appendChild(s),e.appendChild(t),e.appendChild(n),e.appendChild(i),e.appendChild(r),{wrapper:e,arrow:t,title:n,description:i,footer:r,previousButton:l,nextButton:d,closeButton:s,footerButtons:a,progress:o}}function Ce(){var e;const t=U("popover");t&&(null==(e=t.wrapper.parentElement)||e.removeChild(t.wrapper))}function ke(e={}){function t(){M("allowClose")&&d()}function n(){const e=U("activeIndex"),t=M("steps")||[];if("undefined"==typeof e)return;const n=e+1;t[n]?l(n):d()}function i(){const e=U("activeIndex"),t=M("steps")||[];if("undefined"==typeof e)return;const n=e-1;t[n]?l(n):d()}function s(e){(M("steps")||[])[e]?l(e):d()}function r(){var e;if(U("__transitionCallback"))return;const t=U("activeIndex"),n=U("__activeStep"),s=U("__activeElement");if("undefined"==typeof t||"undefined"==typeof n||"undefined"==typeof U("activeIndex"))return;const r=(null==(e=n.popover)?void 0:e.onPrevClick)||M("onPrevClick");if(r)return r(s,n,{config:M(),state:U()});i()}function o(){var e;if(U("__transitionCallback"))return;const t=U("activeIndex"),i=U("__activeStep"),s=U("__activeElement");if("undefined"==typeof t||"undefined"==typeof i)return;const r=(null==(e=i.popover)?void 0:e.onNextClick)||M("onNextClick");if(r)return r(s,i,{config:M(),state:U()});n()}function a(){U("isInitialized")||(F("isInitialized",!0),document.body.classList.add("driver-active",M("animate")?"driver-fade":"driver-simple"),ve(),q("overlayClick",t),q("escapePress",t),q("arrowLeftPress",r),q("arrowRightPress",o))}function l(e=0){var t,n,i,s,r,o,a,c;const p=M("steps");if(!p)return console.error("No steps to drive through"),void d();if(!p[e])return void d();F("__activeOnDestroyed",document.activeElement),F("activeIndex",e);const u=p[e],v=p[e+1],g=p[e-1],h=(null==(t=u.popover)?void 0:t.doneBtnText)||M("doneBtnText")||"Done",w=M("allowClose"),m="undefined"!=typeof(null==(n=u.popover)?void 0:n.showProgress)?null==(i=u.popover)?void 0:i.showProgress:M("showProgress"),f=((null==(s=u.popover)?void 0:s.progressText)||M("progressText")||"{{current}} of {{total}}").replace("{{current}}",`${e+1}`).replace("{{total}}",`${p.length}`),y=(null==(r=u.popover)?void 0:r.showButtons)||M("showButtons"),b=["next","previous",...w?["close"]:[]].filter((e=>!(null!=y&&y.length)||y.includes(e))),x=(null==(o=u.popover)?void 0:o.onNextClick)||M("onNextClick"),_=(null==(a=u.popover)?void 0:a.onPrevClick)||M("onPrevClick"),C=(null==(c=u.popover)?void 0:c.onCloseClick)||M("onCloseClick");re({...u,popover:{showButtons:b,nextBtnText:v?void 0:h,disableButtons:[...g?[]:["previous"]],showProgress:m,progressText:f,onNextClick:x||(()=>{v?l(e+1):d()}),onPrevClick:_||(()=>{l(e-1)}),onCloseClick:C||(()=>{d()}),...(null==u?void 0:u.popover)||{}}})}function d(e=!0){const t=U("__activeElement"),n=U("__activeStep"),i=U("__activeOnDestroyed"),s=M("onDestroyStarted");if(e&&s){const e=!t||"driver-dummy-element"===(null==t?void 0:t.id);return void s(e?void 0:t,n,{config:M(),state:U()})}const r=(null==n?void 0:n.onDeselected)||M("onDeselected"),o=M("onDestroyed");if(document.body.classList.remove("driver-active","driver-fade","driver-simple"),ge(),Ce(),le(),ie(),G(),Y(),t&&n){const e="driver-dummy-element"===t.id;r&&r(e?void 0:t,n,{config:M(),state:U()}),o&&o(e?void 0:t,n,{config:M(),state:U()})}i&&i.focus()}return H(e),{isActive:()=>U("isInitialized")||!1,refresh:de,drive:(e=0)=>{a(),l(e)},setConfig:H,setSteps:e=>{Y(),H({...M(),steps:e})},getConfig:M,getState:U,getActiveIndex:()=>U("activeIndex"),isFirstStep:()=>0===U("activeIndex"),isLastStep:()=>{const e=M("steps")||[],t=U("activeIndex");return void 0!==t&&t===e.length-1},getActiveStep:()=>U("activeStep"),getActiveElement:()=>U("activeElement"),getPreviousElement:()=>U("previousElement"),getPreviousStep:()=>U("previousStep"),moveNext:n,movePrevious:i,moveTo:s,hasNextStep:()=>{const e=M("steps")||[],t=U("activeIndex");return void 0!==t&&e[t+1]},hasPreviousStep:()=>{const e=M("steps")||[],t=U("activeIndex");return void 0!==t&&e[t-1]},highlight:e=>{a(),re({...e,popover:e.popover?{showButtons:[],showProgress:!1,progressText:"",...e.popover}:void 0})},destroy:()=>{d(!1)}}}n(1818);var Le=n(8895),De=n(708);const Se=e=>((0,i.dD)("data-v-00bc458a"),e=e(),(0,i.Cn)(),e),Pe={class:"col-sm-2"},$e=["innerHTML"],Ae={class:"col-sm-3"},Ie=Se((()=>(0,i._)("p",{class:"my-1 fs1 w-10 text-secondary"},"Document Name",-1))),Ee={class:"fs1"},Te={class:"col-sm-3"},He=Se((()=>(0,i._)("p",{class:"my-1 fs1 w-10 text-secondary"},"Date Created",-1))),Me={class:"fs1"},Be={class:"col-sm-2"},Oe=Se((()=>(0,i._)("p",{class:"my-1 fs1 w-10 text-secondary"},"Status",-1))),Re=Se((()=>(0,i._)("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"},null,-1))),je=[Re],We={class:"text-truncate fs1",style:{"text-transform":"capitalize"}},ze={class:"col-sm-2"},Ne=Se((()=>(0,i._)("b",{class:"w-10"},null,-1))),Fe=["innerHTML"],Ue={key:0,class:"mt-3",style:{background:"#eee"}},Ye={class:"position-relative",style:{width:"75%","padding-left":"6%","padding-right":"6%"}},Ke=["innerHTML"],qe=Se((()=>(0,i._)("span",{class:"d-inline-block",style:{background:"#FDEDB6",width:"36.5%",height:"6px"}},null,-1))),Ve=["innerHTML"],Ge=Se((()=>(0,i._)("span",{class:"d-inline-block",style:{background:"#FDEDB6",width:"28.5%",height:"6px"}},null,-1))),Ze=["innerHTML"],Xe={class:"d-flex justify-content-between w-75"},Je={style:{width:"40%"},class:"d-flex flex-column align-items-start"},Qe={style:{},class:"text-center"},et=Se((()=>(0,i._)("p",{style:{"font-size":"0.95em","font-weight":"400"},class:"m-0"},"Admin Document sent ",-1))),tt={style:{"font-size":"0.8em"}},nt={style:{width:"30%"},class:"d-flex flex-column align-items-start"},it={class:"text-center"},st=Se((()=>(0,i._)("p",{style:{"font-size":"0.95em","font-weight":"400"},class:"m-0"},"High School signed ",-1))),rt={style:{"font-size":"0.8em"}},ot={style:{width:"30%"},class:"d-flex flex-column align-items-start"},at={class:"text-center"},lt=Se((()=>(0,i._)("p",{style:{"font-size":"0.95em","font-weight":"400"},class:"m-0"},"Admin Approved ",-1))),dt={style:{"font-size":"0.8em"}};function ct(e,t,n,r,o,a){return(0,i.wg)(),(0,i.iD)("div",{class:(0,s.C_)(["w-100",{"rounded bg-white":o.isOpen}])},[(0,i._)("div",{class:(0,s.C_)([{"rounded shadow bg-white":!o.isOpen},"row mx-auto py-3 d-flex align-items-center"]),style:{width:"95%"}},[(0,i._)("div",Pe,[(0,i._)("span",{class:"ms-3",innerHTML:e.$globals.icons.pdf},null,8,$e)]),(0,i._)("div",Ae,[Ie,(0,i._)("span",Ee,(0,s.zw)(n.letter?.name),1)]),(0,i._)("div",Te,[He,(0,i._)("span",Me,(0,s.zw)(n.letter?.created_at),1)]),(0,i._)("div",Be,[Oe,(0,i._)("span",null,[((0,i.wg)(),(0,i.iD)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10","border-radius":"5px",class:"bi bi-circle",style:(0,s.j5)({backgroundColor:a.getTextColor(n.letter?.status||"pending"),fill:a.getTextColor(n.letter?.status||"pending"),borderRadius:"5px"}),viewBox:"0 0 16 16"},je,4))]),(0,i._)("span",We,(0,s.zw)(n.letter?.status??"Pending"),1)]),(0,i._)("div",ze,[Ne,(0,i._)("button",{onClick:t[0]||(t[0]=(...e)=>a.view&&a.view(...e)),class:"btn btn-sm btn-light"},[(0,i.Uk)("View "),(0,i._)("span",{innerHTML:e.$globals.icons.caret},null,8,Fe)])]),o.isOpen?((0,i.wg)(),(0,i.iD)("hr",Ue)):(0,i.kq)("",!0)],2),(0,i._)("div",{class:(0,s.C_)([{"d-flex":o.isOpen,"d-none":!o.isOpen},"flex-column justify-content-around align-items-center mt-3"])},[(0,i._)("div",Ye,[(0,i._)("span",{innerHTML:e.$globals.icons.status,style:{stroke:"#00A137"}},null,8,Ke),qe,(0,i._)("span",{innerHTML:e.$globals.icons.status,style:(0,s.j5)("accepted"==n.letter?.receiver_status?"stroke:#00A137":"pending"==n.letter?.receiver_status?"stroke:#909295":"stroke:#DC3545")},null,12,Ve),Ge,(0,i._)("span",{innerHTML:e.$globals.icons.status,style:(0,s.j5)("approved"==n.letter?.status?"stroke:#00A137":"pending"==n.letter?.status?"stroke:#909295":"stroke:#DC3545")},null,12,Ze)]),(0,i._)("div",Xe,[(0,i._)("span",Je,[(0,i._)("span",Qe,[et,(0,i._)("span",tt,"Date: "+(0,s.zw)(n.letter?.created_at||NaN),1)])]),(0,i._)("span",nt,[(0,i._)("span",it,[st,(0,i._)("span",rt,"Date: "+(0,s.zw)(n.letter?.signed_date||"YYYY-MM-DD"),1)])]),(0,i._)("span",ot,[(0,i._)("span",at,[lt,(0,i._)("span",dt,"Date: "+(0,s.zw)(n.letter?.approval_date||"YYYY-MM-DD"),1)])])])],2)],2)}var pt={props:{letter:Object},data(){return{isOpen:!1}},methods:{view(){this.isOpen=!this.isOpen,this.$emit("view",this.isOpen)},getTextColor(e){try{return"pending"==e.toLowerCase()?"#fac515":"signed"===e.toLowerCase()?"#0275d8":"approved"===e.toLowerCase()?"#198754":"rejected"===e.toLowerCase()?"#DC3545":"#555555"}catch(t){}return""}}},ut=n(89);const vt=(0,ut.Z)(pt,[["render",ct],["__scopeId","data-v-00bc458a"]]);var gt=vt;const ht={style:{display:"flex","align-items":"center"}},wt={style:{padding:"10px",width:"20%"}},mt={style:{height:"80%",width:"100%","overflow-y":"auto"}},ft=["onClick"],yt={style:{width:"95%","border-left":"1px solid #aaa"}},bt=(0,i._)("br",null,null,-1),xt=(0,i._)("br",null,null,-1),_t={style:{width:"90%",overflow:"auto","margin-left":"auto","margin-right":"auto"}},Ct={class:"p-0 position-relative mx-auto",style:{width:"700px"}},kt={id:"pageCanvasRef-1010",ref:"pageCanvasRef-1010",style:{width:"100%"}},Lt=["id"],Dt=["onClick"],St={key:0},Pt={class:"modal-custom",style:{"z-index":"5003"}},$t={class:"modal-body"};function At(e,t,n,o,a,l){const d=(0,i.up)("CircleProgress"),c=(0,i.up)("SignatureModal");return(0,i.wg)(),(0,i.iD)("div",ht,[(0,i._)("div",{class:(0,s.C_)([{"d-flex":100==a.loadingStatus,"d-none":a.loadingStatus<100},"w-100"])},[(0,i._)("div",wt,[(0,i._)("div",mt,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.pdfPages,((t,n)=>((0,i.wg)(),(0,i.iD)("div",{onClick:e=>l.selectPage(n),key:n,style:(0,s.j5)({background:n===a.selectedPageIndex?e.$globals.colorsHex.warningLight:"",padding:"10px",border:"1px solid "+e.$globals.colorsHex.warning,width:"100%",margin:"20px 0px",cursor:"pointer"})},[(0,i._)("canvas",{ref_for:!0,ref:"pagePrevCanvas_1010"+n,style:{width:"100%"},height:"200"},null,512)],12,ft)))),128))])]),(0,i._)("div",yt,[bt,xt,(0,i._)("div",_t,[(0,i._)("div",Ct,[(0,i._)("canvas",kt,null,512),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.letter.signs,((e,t)=>((0,i.wg)(),(0,i.iD)("div",{key:"y_"+t,style:(0,s.j5)("position:absolute;top:"+e.pos_y+"px;left:"+e.pos_x+"px")},[a.selectedPageIndex+1==e.page?((0,i.wg)(),(0,i.iD)("div",{key:0,id:"signature_"+t},[e?.url?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("button",{key:0,onClick:e=>l.addSignature(t),class:"btn btn-sm btn-secondary shadow"},"Signature Placeholder",8,Dt))],8,Lt)):(0,i.kq)("",!0)],4)))),128))])])])],2),a.loadingStatus<100?((0,i.wg)(),(0,i.iD)("div",{key:0,class:(0,s.C_)(["justify-content-center align-items-center w-100",{"d-flex":a.loadingStatus<100,"d-none":a.loadingStatus>=100}]),style:{height:"100%"}},[(0,i.Wm)(d,{value:a.loadingStatus},null,8,["value"])],2)):(0,i.kq)("",!0),(0,i.Wm)(r.uT,{name:"fade"},{default:(0,i.w5)((()=>[a.showModal2?((0,i.wg)(),(0,i.iD)("div",St,[(0,i._)("div",{class:"modal-overlay",style:{"z-index":"5002"},onClick:t[0]||(t[0]=e=>a.showModal2=!1)}),(0,i._)("div",Pt,[(0,i._)("div",$t,[(0,i.Wm)(c,{onGetSign:l.handleFileUpload},null,8,["onGetSign"])])])])):(0,i.kq)("",!0)])),_:1})])}const It=e=>((0,i.dD)("data-v-b158b46c"),e=e(),(0,i.Cn)(),e),Et={class:"main-progress-cbar"},Tt={class:"left-half-clipper"},Ht=It((()=>(0,i._)("div",{class:"first50-bar"},null,-1)));function Mt(e,t,n,r,o,a){return(0,i.wg)(),(0,i.iD)("div",Et,[(0,i._)("div",{class:(0,s.C_)(["progress-circle",{over50:n.value>50}])},[(0,i._)("span",null,(0,s.zw)(n.value)+"%",1),(0,i._)("div",Tt,[Ht,(0,i._)("div",{class:"value-bar",style:(0,s.j5)("transform: rotate("+Math.ceil(n.value/100*360)+"deg)")},null,4)])],2)])}var Bt={props:{value:{type:Number,default:0}}};const Ot=(0,ut.Z)(Bt,[["render",Mt],["__scopeId","data-v-b158b46c"]]);var Rt=Ot,jt=n(4627);const Wt={class:"px-3 row py-1"},zt={class:"col-md-12 bg-light d-flex"},Nt=["disabled"],Ft=(0,i._)("img",{src:jt,alt:""},null,-1),Ut=(0,i._)("span",null,"Draw",-1),Yt=[Ft,Ut],Kt=["disabled"],qt=(0,i._)("svg",{width:"20",height:"19",viewBox:"0 0 20 19",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,i._)("path",{d:"M11.6171 11.0458C10.9022 11.7671 10.4478 12.7061 10.3257 13.7144H2.06286C1.81781 13.7113 1.58383 13.6119 1.41161 13.4375C1.2394 13.2632 1.14284 13.028 1.14286 12.7829V12.6458L4.77143 9.05721C5.04213 8.79403 5.39881 8.63752 5.77578 8.61652C6.15274 8.59552 6.5246 8.71144 6.82286 8.94293L7.74286 9.84578L7.81143 9.90293C7.99707 10.0364 8.21993 10.1082 8.44857 10.1082C8.67721 10.1082 8.90008 10.0364 9.08571 9.90293L12.0514 6.98864C12.4094 6.62505 12.8606 6.3671 13.3556 6.24312C13.8505 6.11913 14.37 6.13389 14.8571 6.28578C15.1638 6.38708 15.4501 6.54185 15.7029 6.74293L16.0114 7.04578V7.42864C16.0114 7.58019 16.0716 7.72554 16.1788 7.8327C16.286 7.93987 16.4313 8.00007 16.5829 8.00007C16.7344 8.00007 16.8798 7.93987 16.9869 7.8327C17.0941 7.72554 17.1543 7.58019 17.1543 7.42864V2.06293C17.1535 1.79031 17.0989 1.52053 16.9936 1.2691C16.8882 1.01767 16.7342 0.789538 16.5403 0.597834C16.3465 0.40613 16.1167 0.254629 15.8641 0.152044C15.6115 0.0494582 15.3412 -0.00218917 15.0686 7.11049e-05H2.06286C1.51668 0.00307215 0.993725 0.221372 0.607513 0.607584C0.221301 0.993796 0.00300105 1.51675 2.39276e-10 2.06293V12.7829C-8.31984e-06 13.3311 0.216962 13.857 0.603498 14.2456C0.990034 14.6343 1.5147 14.8542 2.06286 14.8572H10.3257C10.4576 15.8819 10.9326 16.8317 11.6735 17.5518C12.4143 18.272 13.3772 18.7199 14.4052 18.8226C15.4333 18.9253 16.4658 18.6768 17.3345 18.1175C18.2031 17.5582 18.8567 16.7212 19.1887 15.7428C19.5207 14.7645 19.5115 13.7025 19.1626 12.73C18.8137 11.7576 18.1457 10.932 17.2675 10.3878C16.3893 9.8437 15.3526 9.61308 14.3265 9.7336C13.3004 9.85412 12.3454 10.3187 11.6171 11.0515V11.0458ZM2.06286 1.14293H15.0686C15.1901 1.14218 15.3107 1.16538 15.4233 1.2112C15.5359 1.25703 15.6383 1.32459 15.7248 1.41002C15.8113 1.49545 15.8801 1.59708 15.9274 1.70911C15.9746 1.82113 15.9993 1.94136 16 2.06293V5.59436C15.7482 5.4355 15.4775 5.3088 15.1943 5.21721C14.5146 4.99803 13.788 4.96896 13.093 5.13313C12.398 5.29731 11.7612 5.64849 11.2514 6.14864L8.43429 8.92007L8.16572 8.65721L7.74286 8.24578C7.23488 7.75625 6.5569 7.48273 5.85143 7.48273C5.14596 7.48273 4.46797 7.75625 3.96 8.24578L1.14286 11.0401V2.06293C1.14436 1.81939 1.24177 1.58626 1.41398 1.41405C1.58618 1.24184 1.81932 1.14443 2.06286 1.14293ZM17.2743 16.7029C16.7946 17.182 16.1837 17.5082 15.5187 17.6402C14.8538 17.7722 14.1646 17.704 13.5383 17.4444C12.9121 17.1848 12.3768 16.7454 12.0003 16.1816C11.6237 15.6179 11.4227 14.9552 11.4227 14.2772C11.4227 13.5993 11.6237 12.9365 12.0003 12.3728C12.3768 11.8091 12.9121 11.3696 13.5383 11.11C14.1646 10.8504 14.8538 10.7823 15.5187 10.9142C16.1837 11.0462 16.7946 11.3724 17.2743 11.8515C17.5931 12.1699 17.846 12.5481 18.0185 12.9643C18.191 13.3805 18.2798 13.8266 18.2798 14.2772C18.2798 14.7278 18.191 15.1739 18.0185 15.5902C17.846 16.0064 17.5931 16.3845 17.2743 16.7029Z",fill:"black"})],-1),Vt=(0,i._)("span",null,"Upload",-1),Gt=[qt,Vt],Zt={class:"col-md-12"},Xt={class:"d-flex w-100 mb-3 row"},Jt={key:0,class:"col-md-12 py-4"},Qt={class:"d-flex justify-content-between align-items-center"},en=(0,i._)("h4",null,"Signature",-1),tn={id:"parentDiv",style:{border:"1px dashed #ccc",height:"100px"},ref:"signatureCanvas",width:"100%",height:"150px"},nn={class:"border d-none",style:{width:"100%",height:"100px"}},sn={ref:"signature",src:"",alt:""},rn={key:1,class:"col-md-12 py-4"},on={class:"d-flex justify-content-between align-items-center"},an=(0,i._)("h6",{class:"mb-2"},"Upload Image",-1),ln={key:0,style:{border:"2px dashed #bbb","border-radius":"10px",height:"inherit"},class:"w-100 d-flex justify-content-center align-items-center"},dn={key:1,class:"w-75 text-center py-4"},cn=(0,i._)("h6",{class:"text-center text-secondary mb-1 mt-2"},"Drag and Drop",-1),pn=(0,i._)("p",{class:"mb-2"},"or",-1),un={key:1},vn=["src"],gn={class:"d-flex"},hn=(0,i._)("div",{class:"col-md-2"},null,-1);function wn(e,t,n,r,o,a){return(0,i.wg)(),(0,i.iD)("div",Wt,[(0,i._)("div",zt,[(0,i._)("button",{style:(0,s.j5)(1===o.tab?{borderBottom:"2px solid #FAC515"}:{}),onClick:t[0]||(t[0]=e=>a.selectTab(1)),disabled:1==o.tab,class:"d-flex flex-column btn justify-content-center align-items-center"},Yt,12,Nt),(0,i._)("button",{style:(0,s.j5)(2===o.tab?{borderBottom:"2px solid #FAC515"}:{}),onClick:t[1]||(t[1]=e=>a.selectTab(2)),disabled:2==o.tab,class:"d-flex flex-column btn justify-content-center align-items-center"},Gt,12,Kt)]),(0,i._)("div",Zt,[(0,i._)("div",Xt,[1==o.tab?((0,i.wg)(),(0,i.iD)("div",Jt,[(0,i._)("div",Qt,[en,(0,i._)("span",{class:"mx-1 text-info",onClick:t[2]||(t[2]=(...e)=>a.clearSignature&&a.clearSignature(...e)),style:{cursor:"pointer"}},"Clear")]),(0,i._)("div",tn,null,512),(0,i._)("div",nn,[(0,i._)("img",sn,null,512)])])):(0,i.kq)("",!0),2==o.tab?((0,i.wg)(),(0,i.iD)("div",rn,[(0,i._)("div",on,[an,(0,i._)("span",{class:"mx-1 text-info",onClick:t[3]||(t[3]=t=>e.$refs.file=null),style:{cursor:"pointer"}},"Clear")]),(0,i._)("div",{onDragover:t[6]||(t[6]=(...e)=>a.dragover&&a.dragover(...e)),onDragleave:t[7]||(t[7]=(...e)=>a.dragleave&&a.dragleave(...e)),onDrop:t[8]||(t[8]=(...e)=>a.drop&&a.drop(...e)),class:"mx-auto d-flex justify-content-center align-items-center",style:"border:1px solid #bbb ;border-radius:20px;padding:25px;width:100%;height:150px;"},[e.isDragging?((0,i.wg)(),(0,i.iD)("h6",ln,"Draging")):((0,i.wg)(),(0,i.iD)("div",dn,[cn,pn,o.signUrl?((0,i.wg)(),(0,i.iD)("div",un,[(0,i._)("img",{style:{width:"100px",height:"50px"},src:o.signUrl},null,8,vn)])):((0,i.wg)(),(0,i.iD)("button",{key:0,onClick:t[4]||(t[4]=t=>e.$refs["file"].click()),class:"btn btn-warning mx-auto d-inline-block btn-sm"},"Choose Image"))])),(0,i._)("input",{type:"file",onChange:t[5]||(t[5]=e=>a.onChange(e)),ref:"file",accept:".png",style:{display:"none"}},null,544)],32)])):(0,i.kq)("",!0)]),(0,i._)("div",gn,[(0,i._)("button",{class:"btn btn-sm d-inline-block mx-1 btn-warning",style:{width:"90px"},onClick:t[9]||(t[9]=(...e)=>a.clearSignature&&a.clearSignature(...e))},"Cancel"),(0,i._)("button",{style:{width:"90px"},class:"btn btn-sm d-inline-block mx-1 btn-warning",onClick:t[10]||(t[10]=(...e)=>a.useSignature&&a.useSignature(...e))},"Ok")])]),hn])}var mn=n(8851),fn=n.n(mn),yn=n(5220),bn=null,xn={name:"signatureView",data(){return{tab:1,store:(0,yn.L)(),signUrl:null}},methods:{dragover(e){e.preventDefault(),this.isDragging=!0},dragleave(){this.isDragging=!1},drop(e){e.preventDefault(),this.$refs.file.files=e.dataTransfer.files;const t={target:this.$refs.file};this.onChange(t),this.isDragging=!1},selectTab(e){this.tab=e},async onChange(e){const t=e.target.files[0];if(t){const e=new FileReader;e.onload=()=>{const e=URL.createObjectURL(t);this.signUrl=e},e.onerror=e=>{console.log("FileReader error:",e)},await e.readAsDataURL(t)}},async useSignature(){2==this.tab||await this.captureSignature(),this.$emit("getSign",this.signUrl)},initializeCanvas(){bn=new(fn())(this.drawSignature,this.$refs.signatureCanvas)},drawSignature(e){let t=!1,n=0,i=0;e.setup=()=>{const t=document.getElementById("parentDiv");e.createCanvas(t.clientWidth,100),e.frameRate(3),e.strokeWeight(2),e.noFill(),e.background(255)},e.mousePressed=()=>{t=!0,n=e.mouseX,i=e.mouseY},e.mouseReleased=()=>{t=!1},e.touchMoved=()=>(e.line(e.mouseX,e.mouseY,n,i),n=e.mouseX,i=e.mouseY,!1),e.draw=()=>{if(t)return e.line(n,i,e.mouseX,e.mouseY),n=e.mouseX,i=e.mouseY,!1}},clearSignature(){bn.clear(),bn.background(255)},getSignatureData(){return this.$refs.signatureCanvas.toDataURL()},async captureSignature(){const e=this.$refs.signatureCanvas.getElementsByTagName("canvas")[0];this.signUrl=e.toDataURL()},removeImageBlanks(e){let t=e.width,n=e.height;var i=document.createElement("canvas");i.setAttribute("width",t),i.setAttribute("height",n);var s=i.getContext("2d");s.drawImage(e,0,0);var r=s.getImageData(0,0,t,n),o=r.data,a=function(e,n){var i=t*n+e;return{red:o[4*i],green:o[4*i+1],blue:o[4*i+2],opacity:o[4*i+3]}},l=function(e){return e.red>200&&e.green>200&&e.blue>200},d=function(e){for(var i=e?1:-1,s=e?0:n-1;e?s<n:s>-1;s+=i)for(var r=0;r<t;r++){var o=a(r,s);if(!l(o))return e?s:Math.min(s+1,n)}return null},c=function(e){for(var i=e?1:-1,s=e?0:t-1;e?s<t:s>-1;s+=i)for(var r=0;r<n;r++){var o=a(s,r);if(!l(o))return e?s:Math.min(s+1,t)}return null},p=d(!0),u=d(!1),v=c(!0),g=c(!1),h=g-v,w=u-p;return i.setAttribute("width",h),i.setAttribute("height",w),i.getContext("2d").drawImage(e,v,p,h,w,0,0,.5*h,.5*w),i.toDataURL()}},mounted(){this.initializeCanvas()}};const _n=(0,ut.Z)(xn,[["render",wn]]);var Cn=_n;let kn=null;var Ln={props:["letter"],components:{CircleProgress:Rt,SignatureModal:Cn},data(){return{showModal2:!1,loadingStatus:1,pdfPages:null,selectedPageIndex:0,getSigns:"",letters:"",signs:[],signIndex:0,pdfScale:3,driverConfig:null,canvasHistory:[],canvasIndex:null}},created(){},mounted(){this.$nextTick((()=>{this.signs=this.letter.signs,this.selectLetter(this.letter.url||this.letter.template)}))},watch:{loadingStatus:function(e){e>=100&&this.$emit("loaded",e)}},methods:{async addSignature(e){this.signIndex=e,window.driverObj&&(this.driverConfig=window.driverObj.getConfig(),window.driverObj.destroy()),this.showModal2=!0},handleFileUpload(e){this.showModal2=!1;let t=this.signs[this.signIndex];t.url=e,this.$emit("attachSignature",t)},undo(e){e.url=null,this.$emit("undoAttach",!0)},async selectPage(e){this.selectedPageIndex!=e&&(this.selectedPageIndex=e,A.GlobalWorkerOptions.workerSrc=E(),this.initiatOnePage(e+1,"pageCanvasRef-1010",this.pdfScale))},async initiatOnePage(e,t,n=.4){return await kn.getPage(e).then((async e=>{let i;i="pageCanvasRef-1010"===t?document.getElementById("pageCanvasRef-1010"):this.$refs[t][0];const s=i.getContext("2d"),r=e.getViewport({scale:n});return i.height=r.height,i.width=r.width,await e.render({canvasContext:s,viewport:r,enableWebGL:!1}),!0})),!0},async selectLetter(e=null){try{await this.loadPdf(e),A.GlobalWorkerOptions.workerSrc=E(),this.loadingStatus=0,setTimeout((async()=>{for(let e=0;e<this.pdfPages?.length;e++)await this.initiatOnePage(e+1,"pagePrevCanvas_1010"+e,.3),0===e&&await this.initiatOnePage(1,"pageCanvasRef-1010",this.pdfScale),this.loadingStatus=Math.ceil((e+1)/this.pdfPages.length*100),await new Promise((e=>setTimeout(e,100)))}),1e3)}catch(t){(0,Le.K)({title:"Failed to load Letter",text:"Please check you network"})}},async loadPdf(e){try{A.GlobalWorkerOptions.workerSrc=E();const t=A.getDocument({url:e});kn=await t.promise,this.pdfPages=Array.from({length:kn.numPages},((e,t)=>kn.getPage(t+1)))}catch(t){console.log(t)}}}};const Dn=(0,ut.Z)(Ln,[["render",At]]);var Sn=Dn;window.driverObj=null;let Pn=null;var $n={props:{documents:{default:[]}},components:{LetterCard:gt,PdfPreview:Sn},data(){return{previewLetter:null,loadingStatus:0,selectedPageIndex:0,previewing:!1,currentTab:1,letters:[],savedLetters:[{owner_id:21,platform:"university",receiver_status:"accepted",status:"rejected",signed_date:"20-08-2023",approval_date:"20-08-2023",name:"agreement letter",url:"blob:http://localhost:8080/f929c03f-b7c3-483c-a893-173df4f9caec",template:"blob:http://localhost:8080/f929c03f-b7c3-483c-a893-173df4f9caec",signs:[{pos_x:135,pos_y:194,page:1}],pages:4,created_at:"20-08-2023"}],selectedLetterIndex:null,pdfUploadActive:!1,isDragging:!1,pdfUrl:null,pdfPages:[],signaturePosition:null,selectedPage:"",showModal:!1,activateSign:!1,showTextFrame:!1,text:{value:"Your text here",fontSize:14,x:0,y:0,w:0,h:0},sign:{x:0,y:0,w:0,h:0,file:null},pdfScale:3,userInfo:JSON.parse(localStorage.getItem("userInfo")||"{}"),canvasHistory:[],canvasIndex:-1,tour:0,tour2:0,keyData:0}},methods:{preview(e){this.previewLetter=e},previewLoaded(){let e=this.letters[this.selectedLetterIndex].signs.map(((e,t)=>({element:"#signature_"+t,popover:{title:"Add Signature",description:"Click here to add signature",side:"bottom",align:"start"}})));e.push({popover:{title:"Tour completed",description:"you can now submit you document."}}),setTimeout((()=>{window.driverObj=ke({allowKeyboardControl:!1,showProgress:!0,steps:[...e],onNextClick:(e,t)=>{"Add Signature"==t.popover.title&&this.$refs.childRef.addSignature(0)}}),0==this.tour2&&(this.tour2+=1,window.driverObj.drive())}),500)},async updateStatus(e,t){try{if("accepted"===t){this.$globals.loading=!0;let n={id:e.id,receiver_status:t};if(!e.url)return void(0,Le.K)({text:"Sign the document before submitting"});if("accepted"==e.receiver_status)throw new Error("Document already signed");const i=await fetch(e.url).then((e=>{if(!e.ok)throw new Error("Network response was not ok");return e.blob()})),s=new FormData;s.append("file",i);const r=await(0,De.nv)("file_upload",s);if(!r)throw new Error("Failed to upload the signed document");n.url=r.responseBody,n.receiver_status=t,n.signed_date=new Date;const o=await(0,De.v_)("update_document",n);if(this.$globals.loading=!1,!o?.message)throw new Error("Failed to update letter status");e.receiver_status=t,e.signed_date=new Date,(0,Le.K)({text:"Submitted Successfuly"})}else{let n={id:e.id,receiver_status:t};const i=await(0,De.v_)("update_document",n);if(!i?.message)throw new Error("Failed to update letter status");e.receiver_status=t}}catch(n){(0,Le.K)({text:"Error:"+n})}},async OpenLetterCard(e,t,n,i){if(n.show)return n.show=!1,!1;n.show=e,this.selectedLetterIndex=t,this.$globals.loading=!0,await this.selectLetter(t,n.url||n?.template,i),this.$globals.loading=!1,"pending"==n.receiver_status&&(window.driverObj=ke({allowKeyboardControl:!1,showProgress:!0,doneBtnText:"Open Document",showButtons:["next","close"],nextBtnText:"Continue",steps:[{element:"#l",popover:{title:"Signing Your Agreement Letter",description:"Would you like me to guide you through these procceses?",side:"left",align:"start"}},{element:"#previewScreen",popover:{title:"Start Signing",description:"Double click on the document to preview for signing",side:"left",align:"start"}}],onNextClick:(e,t)=>{"Start Signing"==t.popover.title?this.preview(n):window.driverObj?.moveNext(),console.log(e,t.popover.title)}}),0==this.tour&&(this.tour+=1,window.driverObj.drive()))},async selectLetter(e,t=null,n=null){null===t&&(this.selectedLetterIndex=e,t=this.letters[e].template);try{if(await this.loadPdf(t),A.GlobalWorkerOptions.workerSrc=E(),null!==n)return await this.initiatOnePage(1,n,.3),!1;this.loadingStatus=0,setTimeout((async()=>{for(let e=0;e<this.pdfPages?.length;e++)await this.initiatOnePage(e+1,"pagePrevCanvas_"+e,.3),0===e&&await this.initiatOnePage(1,"pageCanvasRef",this.pdfScale),this.loadingStatus=Math.ceil((e+1)/this.pdfPages.length*100),await new Promise((e=>setTimeout(e,100)))}),1e3)}catch(i){console.log(i),(0,Le.K)({title:"Failed to load Letter",text:"Please check you network"})}},async selectPage(e){this.selectedPageIndex!=e&&(this.selectedPageIndex=e,A.GlobalWorkerOptions.workerSrc=E(),this.initiatOnePage(e+1,"pageCanvasRef",this.pdfScale))},async initiatOnePage(e,t,n=.4){return await Pn.getPage(e).then((async e=>{let i;i="pageCanvasRef"===t?document.getElementById("pageCanvasRef"):this.$refs[t][0];const s=i.getContext("2d"),r=e.getViewport({scale:n});return i.height=r.height,i.width=r.width,await e.render({canvasContext:s,viewport:r,enableWebGL:!1}),!0})),!0},async deleteLetter(e,t){let n=await(0,De.v_)("delete_uploaded_file",{url:t.template},"admin",!1);if(!n)return!1;const i=this.$refs["prevCanvas_"+e];i&&i[0].remove(),this.letters[e]?.template&&URL.revokeObjectURL(this.letters[e].template),this.letters.splice(e,1)},async onChange(){let e=await(0,Le.K)({text:"Enter Letter Name",input:!0,cancelText:"Cancel"});if(!e)return!1;const t=new FormData;t.append("file",this.$refs.file.files[0]),t.append("folder_name","AdminUploadedLetters");let n=await(0,De.nv)("file_upload",t,"admin");if(!n)return(0,Le.K)({text:"check your network and try again"}),!1;this.pdfUrl=n.responseBody,this.letters.push({name:e,url:null,template:this.pdfUrl,signs:[],pages:0}),this.$emit("updateLetter",this.letters),setTimeout((async()=>{try{for(const e in this.letters){const t=this.letters[e];await this.loadPdf(t.template),A.GlobalWorkerOptions.workerSrc=E(),this.initiatOnePage(1,"prevCanvas_"+e),this.letters[this.letters.length-1].pages=this.pdfPages.length}this.pdfUploadActive=!0}catch(e){(0,Le.K)({text:"Agreement let yet to be sent"})}}),1e3)},async loadPdf(e){try{A.GlobalWorkerOptions.workerSrc=E();const t=A.getDocument({url:e});return Pn=await t.promise,this.pdfPages=Array.from({length:Pn.numPages},((e,t)=>Pn.getPage(t+1))),Pn}catch(t){console.log(t)}},dragover(e){e.preventDefault(),this.isDragging=!0},dragleave(){this.isDragging=!1},drop(e){e.preventDefault(),this.$refs.file.files=e.dataTransfer.files,this.onChange(),this.isDragging=!1},async attachSignature(){this.letters[this.selectedLetterIndex].signs.push({pos_x:this.sign.x,pos_y:this.sign.y,page:this.selectedPageIndex+1}),this.$emit("updateLetter",this.letters),this.activateSign=!1},reset(){(0,Le.K)({text:"Are you sure reset changes",cancelText:"Cancel"}).then((e=>{e&&(this.previewLetter.signs=this.previewLetter.signs.map((e=>({...e,url:""}))),this.previewLetter.url="")}))},undoAttach(){if(this.canvasHistory.length>1){const e=this.canvasHistory[this.canvasHistory.length-1];this.letters[this.selectedLetterIndex].url=e,this.previewLetter.url=e,this.canvasHistory.pop()}else this.canvasHistory.length>0&&(this.letters[this.selectedLetterIndex].url="",this.previewLetter.url="",this.canvasHistory.pop())},async signagureData(e){this.$globals.loading=!0;const t=this.letters[this.selectedLetterIndex],n=t.url||t.template,i=await this.loadAndModifyPdf(n,e);console.log(i,32),this.canvasHistory.push(i),t.url=i,this.previewLetter=t,this.$globals.loading=!1},async loadAndModifyPdf(e,t){try{const n=await fetch(e).then((e=>e.arrayBuffer())),i=await fetch(t.url).then((e=>e.arrayBuffer())),s=await $.PDFDocument.load(n),r=await s.embedPng(i),o=s.getPages()[t.page-1];o.drawImage(r,{x:t.pos_x,y:o.getHeight()-t.pos_y-50,width:100,height:50});const a=await s.save(),l=URL.createObjectURL(new Blob([a],{type:"application/pdf"}));return l}catch(n){return console.error("Error loading and modifying PDF:",n),null}}},async created(){},mounted(){this.$nextTick((()=>{this.letters=this.userInfo?.university.agreement_letters}))},computed:{getSigns(){return null!=this.selectedLetterIndex?this.letters[this.selectedLetterIndex]?.signs:[]}}};const An=(0,ut.Z)($n,[["render",P],["__scopeId","data-v-c9ea18ea"]]);var In=An},4627:function(e,t,n){e.exports=n.p+"img/pen.be323f74.svg"}}]);
//# sourceMappingURL=9359.0b6ba316.js.map