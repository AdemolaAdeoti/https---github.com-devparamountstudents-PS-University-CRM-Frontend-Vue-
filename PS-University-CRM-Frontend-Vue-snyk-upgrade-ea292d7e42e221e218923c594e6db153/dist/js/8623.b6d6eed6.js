(self["webpackChunkuniversity_crm"]=self["webpackChunkuniversity_crm"]||[]).push([[8623],{8796:function(t,o,s){"use strict";s.d(o,{Z:function(){return g}});var e=s(3396),r=s(7139);const i={class:"fw-bold d-flex justify-content-between align-self-end"},n={class:""},a={class:"d-flex align-items-start"},l=["src"];function c(t,o,c,u,d,p){return(0,e.wg)(),(0,e.iD)("div",{class:(0,r.C_)([c.page?"mx-auto mt-3 mb-0 overflow-auto":"mx-auto mt-3 mb-0"])},[(0,e._)("div",{class:(0,r.C_)([c.page?"d-flex gap-3":"row"])},[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(c.docFileCount,(t=>((0,e.wg)(),(0,e.iD)("div",{class:(0,r.C_)(t.class),key:t.id},[(0,e._)("div",{class:(0,r.C_)(t.style),style:(0,r.j5)(t.borderColor)},[(0,e._)("div",i,[(0,e._)("h1",n,(0,r.zw)(t.count),1),(0,e._)("div",a,[(0,e._)("img",{src:s(8461)(`./${t.img}`),alt:""},null,8,l)])]),(0,e._)("small",null,(0,r.zw)(t.subTitle),1),(0,e._)("h6",null,(0,r.zw)(t.title),1),(0,e._)("h4",null,(0,r.zw)(t.excerpt),1)],6)],2)))),128))],2)],2)}var u={name:"DashboardStat",props:{docFileCount:{type:Array,default:()=>[]},page:{type:Boolean,default:!1}},data(){return{}}},d=s(89);const p=(0,d.Z)(u,[["render",c],["__scopeId","data-v-7413e726"]]);var g=p},8623:function(t,o,s){"use strict";s.r(o),s.d(o,{default:function(){return It}});var e=s(3396);const r=t=>((0,e.dD)("data-v-562d292f"),t=t(),(0,e.Cn)(),t),i={class:"d-flex justify-content-between"},n=r((()=>(0,e._)("div",null,[(0,e._)("h3",{class:"mx-5 fw-bold mb-0 mt-1"},"Promotions")],-1))),a={class:"mx-5"},l=["src"],c=r((()=>(0,e._)("hr",{style:{border:"1px solid #f79009"}},null,-1))),u=r((()=>(0,e._)("hr",{style:{border:"1px solid #f79009"}},null,-1))),d={class:"d-flex justify-content-end"},p={class:"mx-5"},g=["src"],m=r((()=>(0,e._)("hr",{style:{border:"1px solid #f79009"}},null,-1))),b={class:"w-100",style:{"overflow-x":"auto"}};function h(t,o,r,h,f,v){const x=(0,e.up)("RequestLoader"),w=(0,e.up)("DashboardCard"),_=(0,e.up)("PromotionFilter"),C=(0,e.up)("PromotionCourses");return(0,e.wg)(),(0,e.iD)("div",null,[(0,e.Wm)(x),(0,e._)("div",i,[n,(0,e._)("div",a,[(0,e._)("button",{class:"backgroundImage",onClick:o[0]||(o[0]=t=>v.createPromotion())},[(0,e._)("img",{src:s(1573),style:{height:"20px",width:"20px","margin-bottom":"2px"}},null,8,l),(0,e.Uk)(" Create Promotion ")])])]),c,(0,e.Wm)(w,{"doc-file-count":f.docFileCount},null,8,["doc-file-count"]),u,(0,e._)("div",d,[(0,e._)("div",p,[f.filterIsVisible?(0,e.kq)("",!0):((0,e.wg)(),(0,e.iD)("button",{key:0,class:"backgroundImage",onClick:o[1]||(o[1]=t=>v.toggleFilter())},[(0,e._)("img",{src:s(6759),style:{height:"20px",width:"20px","margin-bottom":"2px"}},null,8,g),(0,e.Uk)(" Filter ")]))])]),f.filterIsVisible?((0,e.wg)(),(0,e.j4)(_,{key:0,onCloseFilter:o[2]||(o[2]=t=>v.toggleFilter())})):(0,e.kq)("",!0),m,(0,e._)("div",b,[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(f.promotions,(t=>((0,e.wg)(),(0,e.j4)(C,{course:t,key:t.id},null,8,["course"])))),128))])])}s(7658);var f=s(8796),v=s(7139);const x=t=>((0,e.dD)("data-v-0b09e1fc"),t=t(),(0,e.Cn)(),t),w={class:"row d-flex shadow px-1 py-3 my-4 mx-3 rounded-3",style:{"white-space":"pre","background-color":"#fff","min-width":"1000px"}},_={class:"col-12 d-flex align-items-center"},C={class:"row col d-flex justify-content-between align-items-center"},y={class:"col-10"},k={class:""},P={class:"row"},D={class:"text-secondary track-cell col-2 px-1"},F=x((()=>(0,e._)("span",null,"Course Code",-1))),I={class:"text-dark mb-0 text-truncate"},S={class:"text-secondary track-cell col-4 px-1"},j=x((()=>(0,e._)("span",null,"Program Name ",-1))),V={class:"text-dark mb-0 text-truncate"},N={class:"text-secondary track-cell col-2 px-1"},U=x((()=>(0,e._)("span",null,"Date Created ",-1))),z={class:"text-dark mb-0 text-truncate"},O={class:"text-secondary track-cell col-2 px-1"},Z=x((()=>(0,e._)("span",null,"Duration (days)",-1))),A={class:"text-dark mb-0 text-truncate"},E={class:"text-secondary track-cell col-2 px-1"},$=x((()=>(0,e._)("span",null,"Status ",-1))),M={class:"text-dark mb-0 d-flex align-items-center"},R={style:{"margin-right":"5px"}},T=x((()=>(0,e._)("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"},null,-1))),W=[T],q={class:"text-truncate"},H={class:"col-2"};function K(t,o,s,r,i,n){return(0,e.wg)(),(0,e.iD)("div",w,[(0,e._)("div",_,[(0,e._)("div",C,[(0,e._)("div",y,[(0,e._)("div",k,[(0,e._)("div",P,[(0,e._)("div",D,[F,(0,e._)("p",I,(0,v.zw)(s.course.program.program_code),1)]),(0,e._)("div",S,[j,(0,e._)("p",V,(0,v.zw)(s.course.program.program_name),1)]),(0,e._)("div",N,[U,(0,e._)("p",z,(0,v.zw)(s.course.created_at),1)]),(0,e._)("div",O,[Z,(0,e._)("p",A,(0,v.zw)(s.course.duration),1)]),(0,e._)("div",E,[$,(0,e._)("p",M,[(0,e._)("span",R,[((0,e.wg)(),(0,e.iD)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"10","border-radius":"5px",class:"bi bi-circle",style:(0,v.j5)({backgroundColor:n.getIcon,fill:n.getIcon,borderRadius:"5px"}),viewBox:"0 0 16 16"},W,4))]),(0,e._)("span",q,(0,v.zw)(s.course.status),1)])])])])]),(0,e._)("div",H,[(0,e._)("button",{onClick:o[0]||(o[0]=t=>n.view(s.course.id)),class:(0,v.C_)(["view-track btn text-dark px-4 py-2",i.trackDetails?"primary-btn":"btn-disabled"])}," Insight ",2)])])])])}var B={props:{course:{type:Object,default:()=>{}}},data(){return{trackDetails:!1}},methods:{view(t){this.$router.push(`/promotions/insights/${t}`)}},computed:{getIcon(){return"active"==this.course.status?"#00b300":"#ff0000"}}},L=s(89);const Y=(0,L.Z)(B,[["render",K],["__scopeId","data-v-0b09e1fc"]]);var Q=Y,G=s(9242);const J=t=>((0,e.dD)("data-v-4ce7bd9e"),t=t(),(0,e.Cn)(),t),X={class:"d-flex justify-content-between mx-4 px-3"},tt={class:"row m-w-100"},ot={class:"form-group col"},st=J((()=>(0,e._)("label",{for:"courseCode",class:"font-weight-bold mb-1"},"Course Code",-1))),et={class:"form-groups col"},rt=J((()=>(0,e._)("label",{for:"programName",class:"font-weight-bold mb-1"},"Program Name",-1))),it={class:"form-group col"},nt=J((()=>(0,e._)("label",{for:"dateCreated",class:"font-weight-bold d-block mb-1"},"Date Created",-1))),at={class:"d-flex justify-content-between mt-4 align-items-end row"},lt={class:"form-group col"},ct=J((()=>(0,e._)("label",{for:"courseCode",class:"font-weight-bold d-block mb-1"},"Status",-1))),ut={class:"form-group col"},dt=J((()=>(0,e._)("label",{for:"courseCode",class:"font-weight-bold mb-1"},"Duration",-1))),pt=J((()=>(0,e._)("div",{class:"col d-flex justify-content-end"},[(0,e._)("button",{class:"btn btn-secondary px-4"},"Search")],-1))),gt={class:""},mt=["src"];function bt(t,o,r,i,n,a){const l=(0,e.up)("Calendar"),c=(0,e.up)("Dropdown");return(0,e.wg)(),(0,e.iD)("div",X,[(0,e._)("form",{action:"",class:"w-85",onSubmit:o[5]||(o[5]=(0,G.iM)((t=>a.filterPromotion()),["prevent"]))},[(0,e._)("div",tt,[(0,e._)("div",ot,[st,(0,e.wy)((0,e._)("input",{id:"courseCode",type:"search","onUpdate:modelValue":o[0]||(o[0]=t=>n.courseCode=t),class:"form-control border w-100 border-warning outline-none py-2 userInput"},null,512),[[G.nr,n.courseCode]])]),(0,e._)("div",et,[rt,(0,e.wy)((0,e._)("input",{id:"programName",type:"search","onUpdate:modelValue":o[1]||(o[1]=t=>n.programName=t),class:"form-control border w-100 py-2 border-warning outline-none userInput"},null,512),[[G.nr,n.programName]])]),(0,e._)("div",it,[nt,(0,e.Wm)(l,{modelValue:n.dateCreated,"onUpdate:modelValue":o[2]||(o[2]=t=>n.dateCreated=t),dateFormat:"dd/mm/yy",id:"dateCreated",class:"userInput"},null,8,["modelValue"])])]),(0,e._)("div",at,[(0,e._)("div",lt,[ct,(0,e.Wm)(c,{options:n.promotionStatus,modelValue:n.status,"onUpdate:modelValue":o[3]||(o[3]=t=>n.status=t),placeholder:"Select a status",class:"userInput"},null,8,["options","modelValue"])]),(0,e._)("div",ut,[dt,(0,e.wy)((0,e._)("input",{id:"courseCode",type:"search","onUpdate:modelValue":o[4]||(o[4]=t=>n.duration=t),class:"form-control border w-100 py-2 border-warning outline-none userInput"},null,512),[[G.nr,n.duration]])]),pt])],32),(0,e._)("div",gt,[(0,e._)("button",{class:"backgroundImage d-block mb-4",onClick:o[6]||(o[6]=o=>t.$emit("closeFilter"))},[(0,e._)("img",{src:s(6759),style:{height:"20px",width:"20px","margin-bottom":"2px"}},null,8,mt),(0,e.Uk)(" Filter ")]),(0,e._)("button",{class:"btn border border-secondary backgroundImage",style:{background:"#eee"},onClick:o[7]||(o[7]=t=>a.clearForm())}," Clear All ")])])}var ht=s(2033),ft=s(5754),vt={components:{Calendar:ht.Z,Dropdown:ft.Z},data(){return{courseCode:"",programName:"",dateCreated:null,status:null,duration:"",promotionStatus:["ongoing","expired"],promoionStatus:[{name:"ongoing"},{name:"expired"}]}},methods:{filterPromotion(){if(""==this.courseCode&&""==this.programName&&null==this.status&&null==this.dateCreated&&""==this.duration)return void alert("Please fill in at least one field");const t={courseCode:this.courseCode,programName:this.programName,status:this.status,dateCreated:this.dateCreated,duration:this.duration};console.log(t),this.clearForm(),this.$emit("closeFilter")},clearForm(){this.courseCode="",this.programName="",this.status=null,this.dateCreated=null,this.duration=""}}};const xt=(0,L.Z)(vt,[["render",bt],["__scopeId","data-v-4ce7bd9e"]]);var wt=xt,_t=s(1020),Ct=s(466);const yt=(0,_t.Q_)({id:"Promotions",state:()=>({promotions:(0,Ct._aR)("promotions",[]),statusCount:(0,Ct._aR)("statusCount",[])}),getters:{getPromotions:t=>t.promotions},persist:!0,actions:{setPromotions(t){this.promotions=t},setStatusCount(t){this.statusCount=t},removeHighSchool(t){this.promotions=this.promotions.filter((o=>o.id!==t))}}});var kt=s(708),Pt=s(8895),Dt={name:"Promotions",components:{DashboardCard:f.Z,PromotionFilter:wt,PromotionCourses:Q},data(){return{promotions:[],filterIsVisible:!1,courses:[],totalPromotions:0,statusCount:{ongoing:0,expired:0},docFileCount:[{id:1,style:"px-lg-3 p-3 py-4 rounded bg-white",count:0,img:"arrow-1.svg",title:"Total",excerpt:"All",class:"col-md-4 col-sm-12 mb-3    px-lg-5 ",borderColor:{border:"2px solid #7375FD !important","border-radius":"10px !important",width:"100% !important",height:"152px !important"}},{id:2,style:"px-lg-3 p-3 py-4 rounded bg-white",count:0,img:"arrow-2.svg",title:"In Progress",excerpt:"Ongoing",class:"col-md-4 col-sm-12 mb-3    ",borderColor:{border:"2px solid #32D583 !important","border-radius":"10px !important",width:"100% !important",height:"152px !important"}},{id:3,style:"px-lg-3 p-3 py-4 rounded  bg-white",count:0,img:"arrow-3.svg",title:"Expired",excerpt:"Expired",class:"col-md-4 col-sm-12 mb-3   px-lg-5",borderColor:{border:"2px solid #F97066 !important","border-radius":"10px !important",width:"100% !important",height:"152px !important"}}]}},async created(){let t=await(0,kt.U2)("promotion/dashboard");if(t.message){t=t.message;let o=Object.keys(t);this.docFileCount.forEach(((s,e)=>{s.count=t[o[e]]||0}))}let o=await(0,kt.U2)("promotions");this.promotions=o.message},methods:{createPromotion(){this.$router.push("/create-promotions")},toggleFilter(){this.filterIsVisible=!this.filterIsVisible},async checkPromotions(t){t||void 0===t?this.setPromotions(t):(0,Pt.K)({text:"There was an error fetching the data!"})},setPromotionCount(){this.docFileCount=this.docFileCount.map((t=>{const o=t;return"All"==o.excerpt?this.totalPromotions>=10?o.count=this.totalPromotions:o.count="0"+this.totalPromotions:"Ongoing"==o.excerpt?(this.statusCount.ongoing>=10?o.count=this.statusCount.ongoing:o.count="0"+this.statusCount.ongoing,console.log(this.statusCount,o.title)):"Expired"==o.excerpt&&(this.statusCount.expired>=10?o.count=this.statusCount.expired:o.count="0"+this.statusCount.expired),o}))},setStatuses(t){t.map((t=>{if("Draft"==t.status||"ongoing"==t.status){const t=this.statusCount.ongoing;this.statusCount.ongoing=t+1}else{const t=this.statusCount.expired;this.statusCount.expired=t+1}}))},setPromotions(t){let o=[];t?.data?.map((t=>{const s=t.program;s&&(s.duration=t.duration+" Days",o.push(s)),o.push(t)})),this.courses=o,this.totalPromotions=o.length,this.setStatuses(this.courses),this.setPromotionCount(),this.setPromotionsStore(this.courses)},setPromotionsStore(t){const o=yt();o.setPromotions(t.data),o.setStatusCount(this.statusCount)}},beforeMount(){}};const Ft=(0,L.Z)(Dt,[["render",h],["__scopeId","data-v-562d292f"]]);var It=Ft},8461:function(t,o,s){var e={"./arrow-1.svg":5204,"./arrow-2.svg":4094,"./arrow-3.svg":5631,"./arrow-4.svg":1440,"./avata-inbox.svg":7389,"./avater-1.svg":9686,"./avater-2.svg":8087,"./avater.svg":5052,"./chat.svg":6145,"./dash-b-black.svg":7639,"./dash-b-o.svg":1696,"./download.svg":8109,"./esma.png":7492,"./help-support-black.svg":7478,"./help-support-o.svg":3814,"./inbox-black.svg":5570,"./inbox-o.svg":8266,"./john-doe.png":1031,"./kamal.png":3122,"./katemoris.png":9328,"./letter.svg":3002,"./logout.svg":1064,"./megaphone-o.svg":9370,"./megaphone.svg":3693,"./notificaition.svg":5384,"./settings.svg":4574,"./student-application-black.svg":174,"./student-application-o.svg":2770,"./student-tracking-black.svg":9060,"./student-tracking-o.svg":5492,"./view.svg":7594};function r(t){var o=i(t);return s(o)}function i(t){if(!s.o(e,t)){var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}return e[t]}r.keys=function(){return Object.keys(e)},r.resolve=i,t.exports=r,r.id=8461},1573:function(t,o,s){"use strict";t.exports=s.p+"img/add-outline.9cb047ed.svg"},5204:function(t,o,s){"use strict";t.exports=s.p+"img/arrow-1.365c3760.svg"},4094:function(t,o,s){"use strict";t.exports=s.p+"img/arrow-2.45d62ee4.svg"},5631:function(t,o,s){"use strict";t.exports=s.p+"img/arrow-3.5be852b6.svg"},1440:function(t,o,s){"use strict";t.exports=s.p+"img/arrow-4.c34feee3.svg"},7389:function(t,o,s){"use strict";t.exports=s.p+"img/avata-inbox.bbb5b8c1.svg"},6145:function(t,o,s){"use strict";t.exports=s.p+"img/chat.8683dc08.svg"},7639:function(t,o,s){"use strict";t.exports=s.p+"img/dash-b-black.25af8843.svg"},1696:function(t,o,s){"use strict";t.exports=s.p+"img/dash-b-o.092dee3b.svg"},8109:function(t,o,s){"use strict";t.exports=s.p+"img/download.1c7f4301.svg"},7478:function(t,o,s){"use strict";t.exports=s.p+"img/help-support-black.ac0dc255.svg"},3814:function(t,o,s){"use strict";t.exports=s.p+"img/help-support-o.8c9120e8.svg"},5570:function(t,o,s){"use strict";t.exports=s.p+"img/inbox-black.3e34d08a.svg"},8266:function(t,o,s){"use strict";t.exports=s.p+"img/inbox-o.b51355f9.svg"},3002:function(t,o,s){"use strict";t.exports=s.p+"img/letter.21e47727.svg"},1064:function(t,o,s){"use strict";t.exports=s.p+"img/logout.622ff59f.svg"},9370:function(t,o,s){"use strict";t.exports=s.p+"img/megaphone-o.6194ee2b.svg"},3693:function(t,o,s){"use strict";t.exports=s.p+"img/megaphone.0197711b.svg"},5384:function(t,o,s){"use strict";t.exports=s.p+"img/notificaition.7deb7091.svg"},4574:function(t,o,s){"use strict";t.exports=s.p+"img/settings.4dfd1aae.svg"},174:function(t,o,s){"use strict";t.exports=s.p+"img/student-application-black.ef6f531f.svg"},2770:function(t,o,s){"use strict";t.exports=s.p+"img/student-application-o.b554e1e1.svg"},9060:function(t,o,s){"use strict";t.exports=s.p+"img/student-tracking-black.a3a049a9.svg"},5492:function(t,o,s){"use strict";t.exports=s.p+"img/student-tracking-o.0d6b3935.svg"},7594:function(t,o,s){"use strict";t.exports=s.p+"img/view.aad77383.svg"},6759:function(t,o,s){"use strict";t.exports=s.p+"img/fiter-icon.c9e1b105.svg"}}]);
//# sourceMappingURL=8623.b6d6eed6.js.map