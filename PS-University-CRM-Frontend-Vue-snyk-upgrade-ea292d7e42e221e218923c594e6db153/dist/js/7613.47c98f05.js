"use strict";(self["webpackChunkuniversity_crm"]=self["webpackChunkuniversity_crm"]||[]).push([[7613],{7613:function(e,t,n){n.r(t),n.d(t,{default:function(){return x}});var a=n(3396);const r={class:"px-3 row"},i={class:"offset-md-2 col-md-8"},s={class:"d-flex mb-3 row"},u={class:"col-md-6"},o=(0,a._)("h4",null,"Sign Here",-1),l={id:"parentDiv",class:"border",ref:"signatureCanvas",width:"100%",height:"200"},c={class:"col-md-6 mb-3"},g=(0,a._)("h4",null,"Output",-1),d={class:"border",style:{width:"100%",height:"200px"}},m={ref:"signature",src:"",alt:""},h=(0,a._)("div",{class:"col-md-2"},null,-1),v={class:"col-md-12"};function f(e,t,n,f,b,w){const C=(0,a.up)("center");return(0,a.wg)(),(0,a.iD)("div",r,[(0,a._)("div",i,[(0,a._)("div",s,[(0,a._)("div",u,[o,(0,a._)("div",l,null,512)]),(0,a._)("div",c,[g,(0,a._)("div",d,[(0,a._)("img",m,null,512)])])]),(0,a._)("button",{class:"btn btn-sm d-inline-block mx-1 btn-warning",onClick:t[0]||(t[0]=(...e)=>w.clearSignature&&w.clearSignature(...e))}," Clear "),(0,a._)("button",{class:"btn btn-sm d-inline-block mx-1 btn-warning",onClick:t[1]||(t[1]=(...e)=>w.captureSignature&&w.captureSignature(...e))}," Capture Signature ")]),h,(0,a._)("div",v,[(0,a.Wm)(C,null,{default:(0,a.w5)((()=>[(0,a._)("button",{onClick:t[2]||(t[2]=(...e)=>w.useSignature&&w.useSignature(...e)),class:"btn mx-auto d-inline btn-warning mt-5"},"Use Signature")])),_:1})])])}var b=n(8851),w=n.n(b),C=n(5220),p=null,_={name:"signatureView",data(){return{store:(0,C.L)(),signUrl:null}},methods:{useSignature(){this.$emit("getSign",this.signUrl)},initializeCanvas(){p=new(w())(this.drawSignature,this.$refs.signatureCanvas)},drawSignature(e){let t=!1,n=0,a=0;e.setup=()=>{const t=document.getElementById("parentDiv");e.createCanvas(t.clientWidth,200),e.frameRate(3),e.strokeWeight(2),e.noFill(),e.background(255)},e.mousePressed=()=>{t=!0,n=e.mouseX,a=e.mouseY},e.mouseReleased=()=>{t=!1},e.touchMoved=()=>(e.line(e.mouseX,e.mouseY,n,a),n=e.mouseX,a=e.mouseY,!1),e.draw=()=>{if(t)return e.line(n,a,e.mouseX,e.mouseY),n=e.mouseX,a=e.mouseY,!1}},clearSignature(){p.clear(),p.background(255)},getSignatureData(){return this.$refs.signatureCanvas.toDataURL()},captureSignature(){const e=new Image;e.crossOrigin="Anonymous",this.store.isLoading=!0;const t=this.$refs.signatureCanvas.getElementsByTagName("canvas")[0],n=t.getContext("2d");e.onload=()=>{t.width=e.width,t.height=e.height,n.drawImage(e,0,0);const a=this.removeImageBlanks(t);console.log("Cropped Image Data:",a),this.$refs.signature.src=a,this.signUrl=a,this.store.isLoading=!1},e.src=t.toDataURL()},removeImageBlanks(e){let t=e.width,n=e.height;var a=document.createElement("canvas");a.setAttribute("width",t),a.setAttribute("height",n);var r=a.getContext("2d");r.drawImage(e,0,0);var i=r.getImageData(0,0,t,n),s=i.data,u=function(e,n){var a=t*n+e;return{red:s[4*a],green:s[4*a+1],blue:s[4*a+2],opacity:s[4*a+3]}},o=function(e){return e.red>200&&e.green>200&&e.blue>200},l=function(e){for(var a=e?1:-1,r=e?0:n-1;e?r<n:r>-1;r+=a)for(var i=0;i<t;i++){var s=u(i,r);if(!o(s))return e?r:Math.min(r+1,n)}return null},c=function(e){for(var a=e?1:-1,r=e?0:t-1;e?r<t:r>-1;r+=a)for(var i=0;i<n;i++){var s=u(r,i);if(!o(s))return e?r:Math.min(r+1,t)}return null},g=l(!0),d=l(!1),m=c(!0),h=c(!1),v=h-m,f=d-g;return a.setAttribute("width",v),a.setAttribute("height",f),a.getContext("2d").drawImage(e,m,g,v,f,0,0,.5*v,.5*f),a.toDataURL()}},mounted(){this.initializeCanvas()}},S=n(89);const k=(0,S.Z)(_,[["render",f]]);var x=k}}]);
//# sourceMappingURL=7613.47c98f05.js.map